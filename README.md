# RFC for `template-generator-cli` (name TBD)

Note: while commands like `precommit autoupdate`, `cz bump`, and `cs changelog` *could* be moved
into `template-generator-cli`, they could also be called outside of `template-generator-cli`. Advantage: in GitHub actions,
we could have those commands be parallel steps. That way they could be parallelized accross multiple
GitHub actions workers, each with their own CPU, rather than be parallelized on a single worker
with one CPU. 

```makefile
# WARNING! DO NOT MODIFY THIS FILE! This file is autogenerated by template-generator-cli. 
# Customizations can be made by modifying the .template-generator-cli-config.py file 
# in the root of this repository.

test:
    echo "Not implemented"

# update the template-generator-cli-managed project files and build the project for distribution
build:
    aws codeartifact login ... # authenticate with our private pypi server

    # update the project template using the latest version of template-generator-cli
    # NOTE: several commands below also mutate files, those could be moved
    #       into this CLI tool
    pipx run --index-url "https://your.private.pypi.server.com" \
        template-generator-cli update-project-in-place

    # (mutates files) update .pre-commit.config.yml with latest versions of code quality tools
    pipx run precommit autoupdate

    # run code quality tools (linters, formatters, etc.) with max parallelism
    pipx run precommit run --all-files

    # (mutates file) autogenerate CHANGELOG from "conventional commit" compliant commit messages
    pipx run --spec "commitizen==latest" \
        cz changelog

    # (mutates file) derive semver from "conventional commit" compliant commit messages and bump version.txt 
    pipx run --spec "commitizen==latest" \
        cz bump

    # build the docs
    pipx run --index-url "https://your.private.pypi.server.com" \
        --spec "easy-sphinx-docs-cli==latest" \
        easy-sphinx-docs-cli build

    # build the .whl and .tgz versions of the python package
    git tag $(cat version.txt)
    pipx run build


# publish built artifacts including docs and the python package
release:
    aws codeartifact login ... # authenticate with our private pypi server

    # update the project in place; imagine that this command includes
    # "precommit autoupdate; cz changelog; cz bump"; fail if any changes
    # are made to any files when running this--a diff would mean that
    # a developer modified a restricted file by hand and not via the template-generator-cli
    # config file
    pipx run --index-url "https://your.private.pypi.server.com" \
        template-generator-cli update-project-in-place --fail-if-diff

    # make sure this is a new version being released; "git push --tags"
    # fails if the tags already exist in the remote
    git tag $(cat version.txt) "latest"
    git push --tags

    # publish the docs
    pipx run --index-url "https://your.private.pypi.server.com" \
        --spec "easy-sphinx-docs-cli==latest" \
        easy-sphinx-docs-cli publish

    # publish the python package (.whl and .tgz files)
    pipx run twine upload ./dist/*
```